<!DOCTYPE html><html lang="en"><head><title>shared/Gauge.spec</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="shared/Gauge.spec"><meta name="groc-project-path" content="src/shared/Gauge.spec.js"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">src/shared/Gauge.spec.js</div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="jauge-spec">Jauge (spec)</h1></div></div></div><div class="segment"><div class="code"><div class="wrapper"><span class="hljs-keyword">import</span> { expect } <span class="hljs-keyword">from</span> <span class="hljs-string">'chai'</span>
<span class="hljs-keyword">import</span> { shallow } <span class="hljs-keyword">from</span> <span class="hljs-string">'enzyme'</span>
<span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">import</span> Gauge <span class="hljs-keyword">from</span> <span class="hljs-string">'./Gauge'</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Le mode “shallow” d’Enzyme est adapté à tout test qui ne nécessite pas le
DOM réel mais peut se contenter du DOM virtuel, ce qui inclue même les simulations
d’événement.
Classiquement, quand on décrit un composant React, on utilise sa balise JSX
comme sujet de la description.  Celui-ci est censé…</p></div></div><div class="code"><div class="wrapper">describe(<span class="hljs-string">'&lt;Gauge /&gt;'</span>, () =&gt; {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="produire-le-composant-attendu">…produire le composant attendu</h2></div></div></div><div class="segment"><div class="code"><div class="wrapper">  it(<span class="hljs-string">'should render appropriately'</span>, () =&gt; {</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Hop!  Production de l’enrobage de test à base de DOM virtuel pour notre composant.</p></div></div><div class="code"><div class="wrapper">    <span class="hljs-keyword">const</span> wrapper = shallow(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Gauge</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">{50}</span> /&gt;</span>)</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Utilisation d’une assertion métier du plugin: <code>prop</code>, qui teste la présence, voire
la valeur, d’une <em>prop</em> au sens React.</p></div></div><div class="code"><div class="wrapper">    expect(wrapper).to.have.prop(<span class="hljs-string">'mode'</span>, <span class="hljs-string">'determinate'</span>)
    expect(wrapper).to.have.prop(<span class="hljs-string">'max'</span>, <span class="hljs-number">100</span>)
    expect(wrapper).to.have.prop(<span class="hljs-string">'value'</span>, <span class="hljs-number">50</span>)</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Comme les assertions de valeur de <em>prop</em> sont de simples égalités strictes
(<code>===</code>), elles ne suffisent pas pour des objets.  On récupère alors la valeur
telle quelle et on utilise une comparaison profonde standard de Chai.</p></div></div><div class="code"><div class="wrapper">    expect(wrapper)
      .to.have.prop(<span class="hljs-string">'style'</span>)
      .that.deep.equals({ height: <span class="hljs-number">8</span> })
  })</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="-g-rer-sa-prop-optionnelle-max-">…gérer sa <em>prop</em> optionnelle <code>max</code></h2></div></div><div class="code"><div class="wrapper">  it(<span class="hljs-string">'should honor custom max'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> wrapper = shallow(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Gauge</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">{50}</span> <span class="hljs-attribute">max</span>=<span class="hljs-value">{75}</span> /&gt;</span>)</span>

    expect(wrapper).to.have.prop(<span class="hljs-string">'max'</span>, <span class="hljs-number">75</span>)
  })</div></div></div><div class="segment"><div class="comments "><div class="wrapper"><h2 id="valider-le-snapshot">…valider le snapshot</h2>
<p>(avoir une structure détaillée identique à la dernière qui a été validée
par les développeurs au moyen d’un snapshot.)</p></div></div><div class="code"><div class="wrapper">  it(<span class="hljs-string">'should otherwise match the expected snapshot'</span>, () =&gt; {
    <span class="hljs-keyword">const</span> now = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.UTC(<span class="hljs-number">2017</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>, <span class="hljs-number">12</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))
    <span class="hljs-keyword">const</span> wrapper = shallow(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Gauge</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">{50}</span> <span class="hljs-attribute">now</span>=<span class="hljs-value">{now}</span> /&gt;</span>)</span>

    expect(wrapper).to.matchSnapshot()
  })
})</div></div></div></div></body></html>